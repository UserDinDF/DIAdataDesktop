<Window x:Class="DIAdataDesktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:DIAdataDesktop.ViewModels"
        xmlns:controls="clr-namespace:DIAdataDesktop.Views.Controls"
        xmlns:conv="clr-namespace:DIAdataDesktop.Converters"
        xmlns:svgc="http://sharpvectors.codeplex.com/svgc/"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Style="{StaticResource CustomWindowStyle}"
        mc:Ignorable="d"
        Margin="0,0,0,0"
        Topmost="False"
        Title="DIAdata Desktop" Height="780" Width="1200"
        WindowStartupLocation="CenterScreen"
        Background="#0B1220">

    <Window.DataContext>
        <viewmodels:MainViewModel/>
    </Window.DataContext>

    <Window.Resources>
        <conv:InverseBooleanConverter x:Key="InvBool"/>
        <conv:BooleanToVisibilityConverter x:Key="BoolToVis"/>
        <conv:StringToVisibilityConverter x:Key="StringToVis"/>
        <conv:StringEqualsToBoolConverter x:Key="StringEqualsToBool"/>
    </Window.Resources>

    <Grid Background="{StaticResource ContentBg}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="280"/>
            <ColumnDefinition Width="12"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0"
                Background="{StaticResource SidebarBg}"
                BorderBrush="{StaticResource SidebarStroke}"
                BorderThickness="0,0,1,0">

            <DockPanel LastChildFill="True" Margin="16">

                <StackPanel DockPanel.Dock="Top" Margin="0,6,0,14">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="48"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <Image Source="{svgc:SvgImage Source=/Logos/dia-icon.svg, AppName=DIAdataDesktop}" Height="48" Width="48"/>

                        <StackPanel Grid.Column="2">
                            <TextBlock Text="DIA App" Foreground="{StaticResource SidebarText}"
                                       FontSize="18" FontWeight="SemiBold"/>
                            <TextBlock Text="DIAdata Desktop" Foreground="{StaticResource SidebarTextMuted}"
                                       FontSize="12" Margin="0,2,0,0"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <ToggleButton Style="{StaticResource SidebarMenuItem}"
                                      Tag="DataLibrary"
                                      Click="Nav_Click"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=DataLibrary}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="◈" Opacity="0.85" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Data library" FontWeight="SemiBold"/>
                            </Grid>
                        </ToggleButton>

                        <ToggleButton Style="{StaticResource SidebarMenuItem}" Margin="14,6,0,0"
                                      Tag="Homepage"
                                      Click="Nav_Click"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=Homepage}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="›" Opacity="0.7" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Homepage" Foreground="{StaticResource SidebarTextMuted}"/>
                            </Grid>
                        </ToggleButton>
                        
                        <ToggleButton Style="{StaticResource SidebarMenuItem}" Margin="14,6,0,0"
                                      Tag="Exchanges"
                                      Click="Nav_Click"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=Exchanges}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="›" Opacity="0.7" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Exchanges" Foreground="{StaticResource SidebarTextMuted}"/>
                            </Grid>
                        </ToggleButton>
                        
                        <ToggleButton Style="{StaticResource SidebarMenuItem}" Margin="14,6,0,0"
                                      Tag="DigitalAssets"
                                      Click="Nav_Click"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=DigitalAssets}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="›" Opacity="0.7" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Digital assets" Foreground="{StaticResource SidebarTextMuted}"/>
                            </Grid>
                        </ToggleButton>

                        <ToggleButton Style="{StaticResource SidebarMenuItem}" Margin="14,6,0,0"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=RealWorldAssets}"
                                      Command="{Binding NavigateCommand}" CommandParameter="RealWorldAssets">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="›" Opacity="0.7" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Real-world assets" Foreground="{StaticResource SidebarTextMuted}"/>
                            </Grid>
                        </ToggleButton>

                        <ToggleButton Style="{StaticResource SidebarMenuItem}" Margin="14,6,0,0"
                                      IsChecked="{Binding SelectedNav, Mode=TwoWay, Converter={StaticResource StringEqualsToBool}, ConverterParameter=Randomness}"
                                      Command="{Binding NavigateCommand}" CommandParameter="Randomness">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="›" Opacity="0.7" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Randomness" Foreground="{StaticResource SidebarTextMuted}"/>
                            </Grid>
                        </ToggleButton>

                 
                        <TextBlock Style="{StaticResource SidebarSectionHeader}" Text="Tools"/>

                        <ToggleButton Style="{StaticResource SidebarMenuItem}"
                                      Click="OpenWatchlistWidget_Click">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="26"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="⌁" Opacity="0.9" VerticalAlignment="Center"/>
                                <TextBlock Grid.Column="1" Text="Watchlist" FontWeight="SemiBold"/>

                                <Border Grid.Column="2" Margin="8,0,0,0" Padding="8,2"
                                         CornerRadius="999" Background="#0F234A" BorderBrush="#2D64E3" BorderThickness="1">
                                    <TextBlock Text="POPUP" FontSize="11" Foreground="#B6D4FF"/>
                                </Border>
                            </Grid>
                        </ToggleButton>

                        <Border DockPanel.Dock="Bottom" Margin="0,14,0,0" VerticalAlignment="Bottom"
                                Background="#0C1A33"
                                BorderBrush="{StaticResource SidebarStroke}"
                                BorderThickness="1"
                                CornerRadius="14"
                                Padding="12">
                            <StackPanel>
                                <TextBlock Text="{Binding StatusChipText}" Foreground="{StaticResource SidebarText}" FontWeight="SemiBold"/>
                                <TextBlock Text="{Binding LastUpdateChipText}" Foreground="{StaticResource SidebarTextMuted}" Margin="0,3,0,0"/>
                                <Border Margin="0,10,0,0"
                     Background="#2B0F12" BorderBrush="#6B1F26" BorderThickness="1"
                     CornerRadius="12" Padding="10"
                     Visibility="{Binding Error, Converter={StaticResource StringToVis}}">
                                    <TextBlock Text="{Binding Error}" Foreground="#FCA5A5" TextWrapping="Wrap"/>
                                </Border>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
                
            </DockPanel>
        </Border>

        <GridSplitter Grid.Column="1"
                      Width="12"
                      Background="#0B1220"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      ShowsPreview="False"/>

        <Grid Grid.Column="2" Margin="18">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <ScrollViewer Grid.Row="2">
                <ContentControl x:Name="MainContent" Margin="0,0,5,0"/>
            </ScrollViewer>
        </Grid>
    </Grid>
</Window>
