<Window x:Class="DIAdataDesktop.Views.Windows.TokenDetailsPopUpWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:DIAdataDesktop.Views.Windows"
        xmlns:converters="clr-namespace:DIAdataDesktop.Converters"
        mc:Ignorable="d"
        Width="520" Height="520"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        Style="{StaticResource CustomWindowStyle}"
        Background="#0B1220"
        AllowsTransparency="False">
    <Window.Resources>
        <converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="12"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border CornerRadius="16" Background="#111B35" BorderBrush="#1E2A46" BorderThickness="1" Padding="12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="{Binding Row.Name}" Foreground="#E5E7EB" FontSize="20" FontWeight="SemiBold"/>
                    <TextBlock Text="{Binding Row.Symbol}" Foreground="#94A3B8" Margin="0,2,0,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Top">
                    <CheckBox Content="Topmost"
                              x:Name="TopmostCheckBox"
                              Checked="TopmostCheckBox_Checked"
                                Unchecked="TopmostCheckBox_Unchecked"
                              Foreground="#E5E7EB"
                              Margin="0,0,10,0"/>
                    <Button Content="Open in Browser"
                            Command="{Binding OpenBrowserCommand}"
                            Padding="10,6"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Toggles -->
        <WrapPanel Grid.Row="2" Margin="0,0,0,10" VerticalAlignment="Top">
            <CheckBox Content="Price" IsChecked="{Binding ShowPrice}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
            <CheckBox Content="Volume" IsChecked="{Binding ShowVolume}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
            <CheckBox Content="Sources" IsChecked="{Binding ShowSources}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
            <CheckBox Content="Network" IsChecked="{Binding ShowNetwork}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
            <CheckBox Content="Updated" IsChecked="{Binding ShowUpdated}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
            <CheckBox Content="Price Yesterday" IsChecked="{Binding ShowPriceYesterday}" Foreground="#E5E7EB" Margin="0,0,12,10"/>
        </WrapPanel>

        <!-- Content -->
        <Border Grid.Row="2" Margin="0,44,0,0"
                CornerRadius="16" Background="#111B35" BorderBrush="#1E2A46" BorderThickness="1" Padding="14">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>

                    <!-- Price -->
                    <StackPanel Visibility="{Binding ShowPrice, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Asset price" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding Row.Price, StringFormat=$ {0:N2}}"
                                   Foreground="#E5E7EB" FontSize="18" FontWeight="SemiBold"/>
                        <Separator Margin="0,12,0,12" Background="#24314E"/>
                    </StackPanel>

                    <!-- Volume -->
                    <StackPanel Visibility="{Binding ShowVolume, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Volume 24h (USD)" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding Row.Quotation.VolumeYesterdayUSD, StringFormat=$ {0:N0}}"
                                   Foreground="#E5E7EB" FontSize="18" FontWeight="SemiBold"/>
                        <Separator Margin="0,12,0,12" Background="#24314E"/>
                    </StackPanel>

                    <!-- Sources -->
                    <StackPanel Visibility="{Binding ShowSources, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Sources" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding Row.CexExchangesCount}"
                                   Foreground="#E5E7EB" FontSize="18" FontWeight="SemiBold"/>
                        <Separator Margin="0,12,0,12" Background="#24314E"/>
                    </StackPanel>

                    <!-- Network -->
                    <StackPanel Visibility="{Binding ShowNetwork, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Network" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,6"/>
                        <Border CornerRadius="10" Background="#0B1220" BorderBrush="#24314E" BorderThickness="1" Padding="10,6">
                            <TextBlock Text="{Binding Row.Blockchain}" Foreground="#E5E7EB" FontWeight="SemiBold"/>
                        </Border>
                        <Separator Margin="0,12,0,12" Background="#24314E"/>
                    </StackPanel>

                    <!-- Updated -->
                    <StackPanel Visibility="{Binding ShowUpdated, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Updated" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding Row.Time, StringFormat={}{0:HH:mm:ss}}"
                                   Foreground="#E5E7EB" FontSize="16" FontWeight="SemiBold"/>
                        <Separator Margin="0,12,0,12" Background="#24314E"/>
                    </StackPanel>

                    <!-- Price Yesterday -->
                    <StackPanel Visibility="{Binding ShowPriceYesterday, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="Price Yesterday" Foreground="#94A3B8" FontWeight="SemiBold" Margin="0,0,0,2"/>
                        <TextBlock Text="{Binding Row.Quotation.PriceYesterday, StringFormat=$ {0:N2}}"
                                   Foreground="#E5E7EB" FontSize="18" FontWeight="SemiBold"/>
                    </StackPanel>

                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Footer -->
        <TextBlock Grid.Row="3" Margin="0,10,0,0"
                   Foreground="#64748B"
                   Text="{Binding Row.Address}" TextTrimming="CharacterEllipsis"/>
    </Grid>
</Window>
